
# 智选车 - 汽车推荐购买平台总体模块设计

## 系统架构图

```mermaid
graph TD
    客户端 --> 服务器层
    服务器层 --> 数据层
    
    subgraph 客户端
        Browser["浏览器"] --> 前端界面
        subgraph 前端界面
            用户界面
            经销商界面
            管理员界面
        end
    end
    
    subgraph 服务器层
        Controller["控制层"] --> Service["服务层"]
        Service --> Repository["持久层"]
        
        subgraph Service
            用户服务模块
            车辆服务模块
            行为记录服务模块
            推荐引擎服务模块
            消息交互服务模块
            系统管理服务模块
        end
    end
    
    subgraph 数据层
        Repository --> 数据库
        Repository --> 文件存储
    end
```

## 核心模块说明

### 1. 用户管理模块

```mermaid
graph TD
    用户管理模块 --> 用户注册与登录
    用户管理模块 --> 用户信息管理
    用户管理模块 --> 用户权限控制
    
    用户注册与登录 --> 普通用户注册
    用户注册与登录 --> 经销商注册
    用户注册与登录 --> 登录验证
    用户注册与登录 --> 密码找回
    
    用户信息管理 --> 基本信息维护
    用户信息管理 --> 购车偏好设置
    用户信息管理 --> 头像上传
    
    用户权限控制 --> 身份认证
    用户权限控制 --> 功能授权
```

#### 业务流程

```mermaid
graph TD
    A[开始] --> B{是否已注册}
    B -->|否| C[注册新用户]
    B -->|是| D[用户登录]
    C --> E[填写基本信息]
    E --> F{用户类型}
    F -->|普通用户| G[设置购车偏好]
    F -->|经销商| H[提交经销商资料]
    H --> I[等待管理员审核]
    G --> J[完成注册]
    I -->|审核通过| J
    D --> K[进入系统]
    J --> K
    K --> L[结束]
```

### 2. 车辆管理模块

```mermaid
graph TD
    车辆管理模块 --> 车辆信息录入
    车辆管理模块 --> 车辆信息管理
    车辆管理模块 --> 车辆分类展示
    车辆管理模块 --> 车辆搜索
    
    车辆信息录入 --> 基本信息录入
    车辆信息录入 --> 详细参数录入
    车辆信息录入 --> 车辆图片上传
    
    车辆信息管理 --> 信息更新
    车辆信息管理 --> 上架下架
    车辆信息管理 --> 删除车辆
    
    车辆分类展示 --> 品牌分类
    车辆分类展示 --> 价格分类
    车辆分类展示 --> 类型分类
    
    车辆搜索 --> 基础搜索
    车辆搜索 --> 高级筛选
```

#### 业务流程

```mermaid
graph TD
    A[开始] --> B{用户身份}
    B -->|普通用户| C[浏览车辆]
    B -->|经销商| D[管理车辆]
    
    C --> E[查看车辆列表]
    E --> F[筛选或搜索]
    F --> G[查看车辆详情]
    
    D --> H[添加新车辆]
    D --> I[编辑已有车辆]
    D --> J[上架/下架车辆]
    
    H --> K[填写基本信息]
    K --> L[填写详细参数]
    L --> M[上传车辆图片]
    M --> N[提交审核]
    
    G --> O[结束]
    I --> N
    J --> O
    N --> O
```

### 3. 行为记录模块

```mermaid
graph TD
    行为记录模块 --> 浏览记录管理
    行为记录模块 --> 收藏管理
    行为记录模块 --> 用户行为分析
    
    浏览记录管理 --> 记录浏览行为
    浏览记录管理 --> 查看浏览历史
    
    收藏管理 --> 收藏车辆
    收藏管理 --> 取消收藏
    收藏管理 --> 查看收藏列表
    
    用户行为分析 --> 行为数据采集
    用户行为分析 --> 兴趣点分析
    用户行为分析 --> 行为统计
```

#### 业务流程

```mermaid
graph TD
    A[开始] --> B[用户浏览车辆]
    B --> C[记录浏览行为]
    C --> D{是否收藏}
    D -->|是| E[添加到收藏]
    D -->|否| F[继续浏览]
    E --> F
    F --> G[分析用户行为]
    G --> H[生成兴趣模型]
    H --> I[为推荐引擎提供数据]
    I --> J[结束]
```

### 4. 推荐引擎模块

```mermaid
graph TD
    推荐引擎模块 --> 偏好匹配推荐
    推荐引擎模块 --> 行为分析推荐
    推荐引擎模块 --> 热门推荐
    推荐引擎模块 --> 推荐结果展示
    
    偏好匹配推荐 --> 价格匹配
    偏好匹配推荐 --> 品牌匹配
    偏好匹配推荐 --> 车型匹配
    
    行为分析推荐 --> 浏览行为分析
    行为分析推荐 --> 收藏行为分析
    行为分析推荐 --> 搜索记录分析
    
    热门推荐 --> 热门车型推荐
    热门推荐 --> 新上市车型推荐
    
    推荐结果展示 --> 首页推荐
    推荐结果展示 --> 个性化推荐页
```

#### 业务流程

```mermaid
graph TD
    A[开始] --> B[获取用户基础信息]
    B --> C[获取用户偏好设置]
    C --> D[获取用户行为数据]
    D --> E[计算推荐结果]
    E --> F[根据优先级排序]
    F --> G[展示推荐车辆]
    G --> H[用户查看推荐]
    H --> I[记录用户反馈]
    I --> J[优化推荐算法]
    J --> K[结束]
```

### 5. 消息交互模块

```mermaid
graph TD
    消息交互模块 --> 在线咨询
    消息交互模块 --> 预约管理
    消息交互模块 --> 通知提醒
    
    在线咨询 --> 发送消息
    在线咨询 --> 接收消息
    在线咨询 --> 查看历史消息
    
    预约管理 --> 创建预约
    预约管理 --> 确认预约
    预约管理 --> 取消预约
    预约管理 --> 完成预约
    
    通知提醒 --> 消息通知
    通知提醒 --> 预约提醒
    通知提醒 --> 系统通知
```

#### 业务流程

```mermaid
graph TD
    A[开始] --> B{操作类型}
    B -->|咨询| C[选择车辆]
    B -->|预约| D[选择车辆和经销商]
    
    C --> E[发送咨询消息]
    E --> F[经销商接收消息]
    F --> G[经销商回复]
    G --> H[用户收到回复]
    
    D --> I[选择预约类型和时间]
    I --> J[提交预约申请]
    J --> K[经销商确认预约]
    K --> L[用户收到预约确认]
    L --> M[到店进行看车/试驾]
    
    H --> N[继续交流或结束]
    M --> O[完成预约流程]
    
    N --> P[结束]
    O --> P
```

### 6. 系统管理模块

```mermaid
graph TD
    系统管理模块 --> 用户管理
    系统管理模块 --> 内容审核
    系统管理模块 --> 数据统计
    系统管理模块 --> 系统设置
    
    用户管理 --> 用户查询
    用户管理 --> 用户状态管理
    用户管理 --> 经销商审核
    
    内容审核 --> 车辆信息审核
    内容审核 --> 经销商信息审核
    
    数据统计 --> 用户统计
    数据统计 --> 交易统计
    数据统计 --> 系统运行统计
    
    系统设置 --> 基本参数设置
    系统设置 --> 推荐算法参数
```

#### 业务流程

```mermaid
graph TD
    A[开始] --> B[管理员登录]
    B --> C{管理操作类型}
    
    C -->|用户管理| D[查看用户列表]
    D --> E[执行用户状态变更]
    
    C -->|内容审核| F[查看待审核内容]
    F --> G[审核处理]
    
    C -->|数据统计| H[选择统计类型]
    H --> I[查看统计数据]
    
    C -->|系统设置| J[修改系统参数]
    
    E --> K[结束]
    G --> K
    I --> K
    J --> K
```

## 模块间交互关系

```mermaid
graph LR
    UM[用户管理模块] --> CM[车辆管理模块]
    UM --> RM[推荐引擎模块]
    UM --> MM[消息交互模块]
    
    CM --> BM[行为记录模块]
    CM --> MM
    
    BM --> RM
    
    RM --> CM
    
    MM --> UM
    MM --> CM
    
    SM[系统管理模块] --> UM
    SM --> CM
    SM --> RM
```


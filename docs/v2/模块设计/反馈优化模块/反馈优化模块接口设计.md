## 反馈优化模块接口设计

### 1. 反馈提交接口

### 名称
submitFeedback

### 说明
接收并存储用户对推荐结果的反馈信息，包括评分、评论及互动行为等

### 定义
```
POST /api/feedback/submit
```

#### 请求体参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| user_id | String | 是 | 用户ID |
| vehicle_id | String | 否 | 车辆ID (针对车辆的反馈必填) |
| recommendation_id | String | 否 | 推荐结果ID (针对推荐结果的反馈必填) |
| feedback_type | String | 是 | 反馈类型：LIKE/DISLIKE/COMMENT/REPORT/SUGGESTION/QUESTION |
| feedback_category | String | 是 | 反馈类别：ALGORITHM/CONTENT/SYSTEM/OTHER |
| rating | Number | 否 | 评分（1-5） |
| comment | String | 否 | 评论内容 |
| interaction_time | Number | 否 | 互动时长（秒） |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| success | Boolean | 是否成功 |
| message | String | 结果消息 |
| feedback_id | String | 反馈ID |

### 2. 用户反馈查询接口

### 名称
getUserFeedbacks

### 说明
根据用户ID查询该用户所有的反馈历史记录

### 定义
```
GET /api/feedback/user/{user_id}
```

#### 路径参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| user_id | String | 是 | 用户ID |

#### 查询参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| feedback_category | String | 否 | 反馈类别 |
| feedback_type | String | 否 | 反馈类型 |
| status | String | 否 | 状态 |
| start_date | String | 否 | 查询起始日期，格式：yyyy-MM-dd |
| end_date | String | 否 | 查询结束日期，格式：yyyy-MM-dd |
| page | Number | 否 | 页码，默认为1 |
| size | Number | 否 | 每页记录数，默认为20 |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| total | Number | 总记录数 |
| feedbacks | Array | 反馈列表 |
| feedbacks[].id | String | 反馈ID |
| feedbacks[].user_id | String | 用户ID |
| feedbacks[].vehicle_id | String | 车辆ID（可能为null） |
| feedbacks[].recommendation_id | String | 推荐ID（可能为null） |
| feedbacks[].feedback_type | String | 反馈类型 |
| feedbacks[].feedback_category | String | 反馈类别 |
| feedbacks[].rating | Number | 评分 |
| feedbacks[].comment | String | 评论内容 |
| feedbacks[].status | String | 状态 |
| feedbacks[].require_approval | Boolean | 是否需要审批 |
| feedbacks[].create_time | String | 创建时间，格式：yyyy-MM-dd HH:mm:ss |
| feedbacks[].interaction_time | Number | 互动时长（秒） |

### 3. 车辆反馈查询接口

### 名称
getVehicleFeedbacks

### 说明
根据车辆ID查询该车辆收到的所有用户反馈

### 定义
```
GET /api/feedback/vehicle/{vehicle_id}
```

#### 路径参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| vehicle_id | String | 是 | 车辆ID |

#### 查询参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| feedback_category | String | 否 | 反馈类别 |
| feedback_type | String | 否 | 反馈类型 |
| status | String | 否 | 状态 |
| start_date | String | 否 | 查询起始日期，格式：yyyy-MM-dd |
| end_date | String | 否 | 查询结束日期，格式：yyyy-MM-dd |
| page | Number | 否 | 页码，默认为1 |
| size | Number | 否 | 每页记录数，默认为20 |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| total | Number | 总记录数 |
| avg_rating | Number | 平均评分 |
| feedbacks | Array | 反馈列表 |
| feedbacks[].id | String | 反馈ID |
| feedbacks[].user_id | String | 用户ID |
| feedbacks[].vehicle_id | String | 车辆ID |
| feedbacks[].recommendation_id | String | 推荐ID（可能为null） |
| feedbacks[].feedback_type | String | 反馈类型 |
| feedbacks[].feedback_category | String | 反馈类别 |
| feedbacks[].rating | Number | 评分 |
| feedbacks[].comment | String | 评论内容 |
| feedbacks[].status | String | 状态 |
| feedbacks[].create_time | String | 创建时间，格式：yyyy-MM-dd HH:mm:ss |
| feedbacks[].interaction_time | Number | 互动时长（秒） |

### 4. 系统反馈查询接口

### 名称
getSystemFeedbacks

### 说明
查询与系统功能相关但不涉及具体车辆的反馈

### 定义
```
GET /api/feedback/system
```

#### 查询参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| feedback_category | String | 否 | 反馈类别，默认为SYSTEM |
| feedback_type | String | 否 | 反馈类型 |
| status | String | 否 | 状态 |
| start_date | String | 否 | 查询起始日期，格式：yyyy-MM-dd |
| end_date | String | 否 | 查询结束日期，格式：yyyy-MM-dd |
| page | Number | 否 | 页码，默认为1 |
| size | Number | 否 | 每页记录数，默认为20 |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| total | Number | 总记录数 |
| feedbacks | Array | 反馈列表 |
| feedbacks[].id | String | 反馈ID |
| feedbacks[].user_id | String | 用户ID |
| feedbacks[].feedback_type | String | 反馈类型 |
| feedbacks[].feedback_category | String | 反馈类别 |
| feedbacks[].comment | String | 评论内容 |
| feedbacks[].status | String | 状态 |
| feedbacks[].require_approval | Boolean | 是否需要审批 |
| feedbacks[].create_time | String | 创建时间，格式：yyyy-MM-dd HH:mm:ss |

### 5. 性能报告查询接口

### 名称
getPerformanceReport

### 说明
查询指定时间范围内的推荐系统性能报告，包括满意度、算法表现等指标

### 定义
```
GET /api/feedback/performance
```

#### 查询参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| start_date | String | 是 | 查询起始日期，格式：yyyy-MM-dd |
| end_date | String | 是 | 查询结束日期，格式：yyyy-MM-dd |
| format | String | 否 | 返回格式：SUMMARY/DETAILED，默认为SUMMARY |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| overallSatisfaction | Number | 总体满意度评分 |
| algorithmPerformance | Object | 各算法性能 |
| algorithmPerformance.behaviorBased | Number | 行为推荐算法性能 |
| algorithmPerformance.preferenceBased | Number | 偏好推荐算法性能 |
| algorithmPerformance.trendingBased | Number | 热门推荐算法性能 |
| improvementRate | Number | 性能提升率 |
| userEngagement | Number | 用户参与度 |
| detailedReports | Array | 详细报告（仅当format=DETAILED时返回） |
| detailedReports[].date | String | 日期 |
| detailedReports[].satisfaction | Number | 满意度 |
| detailedReports[].algorithmPerformance | Object | 算法性能 |
| detailedReports[].algorithmPerformance.behaviorBased | Number | 行为推荐算法性能 |
| detailedReports[].algorithmPerformance.preferenceBased | Number | 偏好推荐算法性能 |
| detailedReports[].algorithmPerformance.trendingBased | Number | 热门推荐算法性能 |

### 6. 立即分析触发接口

### 名称
triggerFeedbackAnalysis

### 说明
手动触发立即进行反馈数据分析，生成分析报告

### 定义
```
POST /api/feedback/analyze
```

#### 请求体参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| start_date | String | 是 | 分析起始日期，格式：yyyy-MM-dd |
| end_date | String | 是 | 分析结束日期，格式：yyyy-MM-dd |
| analyze_type | String | 否 | 分析类型：FULL/INCREMENTAL，默认为INCREMENTAL |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| success | Boolean | 是否成功 |
| message | String | 结果消息 |
| report_id | String | 分析报告ID |

### 7. 分析报告查询接口

### 名称
getFeedbackReport

### 说明
查询指定ID的反馈分析报告详情

### 定义
```
GET /api/feedback/report/{report_id}
```

#### 路径参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| report_id | String | 是 | 报告ID |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| report_id | String | 报告ID |
| analyze_type | String | 分析类型 |
| start_date | String | 起始日期 |
| end_date | String | 结束日期 |
| timestamp | String | 生成时间戳 |
| overallSatisfaction | Number | 总体满意度 |
| algorithmSuggestions | Object | 算法建议 |
| algorithmSuggestions.behaviorBased | Object | 行为推荐算法建议 |
| algorithmSuggestions.behaviorBased.currentPerformance | Number | 当前性能 |
| algorithmSuggestions.behaviorBased.suggestedParameters | Object | 建议参数 |
| algorithmSuggestions.behaviorBased.expectedImprovement | Number | 预期提升 |
| algorithmSuggestions.preferenceBased | Object | 偏好推荐算法建议 |
| algorithmSuggestions.preferenceBased.currentPerformance | Number | 当前性能 |
| algorithmSuggestions.preferenceBased.suggestedParameters | Object | 建议参数 |
| algorithmSuggestions.preferenceBased.expectedImprovement | Number | 预期提升 |
| algorithmSuggestions.trendingBased | Object | 热门推荐算法建议 |
| algorithmSuggestions.trendingBased.currentPerformance | Number | 当前性能 |
| algorithmSuggestions.trendingBased.suggestedParameters | Object | 建议参数 |
| algorithmSuggestions.trendingBased.expectedImprovement | Number | 预期提升 |
| userInsights | Array | 用户洞察 |
| userInsights[].userSegment | String | 用户细分 |
| userInsights[].satisfactionLevel | Number | 满意度水平 |
| userInsights[].commonFeedback | String | 常见反馈 |
| userInsights[].suggestedActions | String | 建议操作 |

### 8. 算法优化应用接口

### 名称
applyAlgorithmOptimization

### 说明
将分析报告中的算法优化建议应用到推荐系统中

### 定义
```
POST /api/feedback/optimize
```

#### 请求体参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| report_id | String | 是 | 分析报告ID |
| algorithm_type | String | 是 | 算法类型：BEHAVIOR/PREFERENCE/TRENDING/ALL |
| apply_mode | String | 否 | 应用模式：AUTO/MANUAL，默认为MANUAL |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| success | Boolean | 是否成功 |
| message | String | 结果消息 |
| appliedChanges | Object | 应用的变更 |
| appliedChanges.algorithm | String | 算法名称 |
| appliedChanges.parameters | Object | 参数 |
| appliedChanges.version | String | 版本 |

### 9. 待审批反馈查询接口

### 名称
getPendingApprovalFeedbacks

### 说明
查询需要管理员审批的反馈列表

### 定义
```
GET /api/feedback/pending-approval
```

#### 查询参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| feedback_category | String | 否 | 反馈类别 |
| feedback_type | String | 否 | 反馈类型 |
| start_date | String | 否 | 查询起始日期，格式：yyyy-MM-dd |
| end_date | String | 否 | 查询结束日期，格式：yyyy-MM-dd |
| page | Number | 否 | 页码，默认为1 |
| size | Number | 否 | 每页记录数，默认为20 |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| total | Number | 总记录数 |
| feedbacks | Array | 反馈列表 |
| feedbacks[].id | String | 反馈ID |
| feedbacks[].user_id | String | 用户ID |
| feedbacks[].vehicle_id | String | 车辆ID（可能为null） |
| feedbacks[].feedback_type | String | 反馈类型 |
| feedbacks[].feedback_category | String | 反馈类别 |
| feedbacks[].comment | String | 评论内容 |
| feedbacks[].create_time | String | 创建时间，格式：yyyy-MM-dd HH:mm:ss |
| feedbacks[].status | String | 状态 |

### 10. 反馈审批接口

### 名称
approveFeedback

### 说明
管理员审批用户提交的反馈

### 定义
```
POST /api/feedback/{feedback_id}/approve
```

#### 路径参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| feedback_id | String | 是 | 反馈ID |

#### 请求体参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| approved | Boolean | 是 | 是否批准：true=批准，false=拒绝 |
| approval_comment | String | 否 | 审批意见 |
| admin_id | String | 是 | 管理员ID |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| success | Boolean | 是否成功 |
| message | String | 结果消息 |
| feedback | Object | 反馈信息 |
| feedback.id | String | 反馈ID |
| feedback.status | String | 更新后的状态 |
| feedback.approvedBy | String | 审批人 |
| feedback.approvalTime | String | 审批时间 |
| feedback.approvalComment | String | 审批意见 |

### 11. 反馈统计接口

### 名称
getFeedbackStatistics

### 说明
查询系统中各类反馈的统计信息

### 定义
```
GET /api/feedback/statistics
```

#### 查询参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| start_date | String | 否 | 查询起始日期，格式：yyyy-MM-dd |
| end_date | String | 否 | 查询结束日期，格式：yyyy-MM-dd |
| groupBy | String | 否 | 分组方式：TYPE/CATEGORY/STATUS，默认TYPE |

#### 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| total | Number | 总反馈数 |
| byType | Object | 按类型统计 |
| byType.LIKE | Number | 点赞数量 |
| byType.DISLIKE | Number | 不喜欢数量 |
| byType.COMMENT | Number | 评论数量 |
| byType.REPORT | Number | 举报数量 |
| byType.SUGGESTION | Number | 建议数量 |
| byType.QUESTION | Number | 问题数量 |
| byCategory | Object | 按类别统计 |
| byCategory.ALGORITHM | Number | 算法相关数量 |
| byCategory.CONTENT | Number | 内容相关数量 |
| byCategory.SYSTEM | Number | 系统相关数量 |
| byCategory.OTHER | Number | 其他类别数量 |
| byStatus | Object | 按状态统计 |
| byStatus.PENDING | Number | 待处理数量 |
| byStatus.APPROVED | Number | 已批准数量 |
| byStatus.REJECTED | Number | 已拒绝数量 |
| byStatus.PROCESSED | Number | 已处理数量 |
| approvalRate | Number | 审批通过率 |
| avgProcessTime | Number | 平均处理时间（小时） |
| avgRating | Number | 平均评分 | 